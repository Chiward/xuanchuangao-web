我将按照以下计划为您实现【历史生成记录】功能模块：

### 1. 数据库与存储初始化 (SQL)
*   创建 `generation_history` 数据表，用于存储生成记录（包含表单数据、生成内容、附件路径等）。
*   配置 RLS (行级安全策略)，确保用户只能访问自己的数据。
*   配置 Supabase Storage 存储桶 `user_uploads`，用于安全存储用户上传的附件素材。

### 2. 前端逻辑升级
*   **修改 `SmartForm` 组件**：在解析文件的同时，将文件上传至 Supabase Storage，并将文件路径传递给父组件。
*   **修改 `EditorPage` 页面**：在 AI 生成完成后，自动将本次生成的完整数据（表单、附件信息、生成结果）保存到 `generation_history` 表中。

### 3. 开发【历史记录列表】组件
*   创建新组件 `components/history-list.tsx`。
*   实现功能：
    *   **列表展示**：卡片式布局，按时间倒序排列。
    *   **交互**：折叠/展开详情、复制生成内容、下载附件、删除记录。
    *   **筛选**：按模板类型筛选。
    *   **分页**：支持“加载更多”以优化性能。

### 4. 首页集成
*   修改 `app/page.tsx`，在模板选择区域下方引入 `HistoryList` 组件。
*   设置仅登录用户可见。

确认后，我将为您执行上述步骤。